<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primeiro Jogo Multiplayer</title>

    <link rel="stylesheet" href="./style.css">
    
</head>
<body>
    <canvas id="screen" width="10" height="10"></canvas>
    <script>
        const screen = document.getElementById('screen')
        const context = screen.getContext('2d')
        const ideintificador_jogador_atual = 'jogador1'

        const games = {
            Jogadores: {
                'jogador1' : { X : 1,Y: 1},
                'jogador2' : { X : 9,Y: 9}
            }
            ,
            Frutas : {
                'Fruta1': { X : 4, Y : 4 },
                'Fruta2': { X : 15,Y :15 }
            }
        }
        
        document.addEventListener("keydown", handleKeyDown)

        function handleKeyDown(event){
            const jogador = games.Jogadores[ideintificador_jogador_atual]
            
            
            const teclaPressionada = event.key

//&& jogador.Y - 1 >= 0
            if(teclaPressionada === 'ArrowUp' ){
                jogador.Y -= 1
                console.log('Up')
                return
            }
            if(teclaPressionada === 'ArrowLeft'){
                jogador.X -= 1
                console.log('Left')
                return
            }
            if(teclaPressionada === 'ArrowRight'){
                jogador.X  += 1
                console.log('Right')
                return
            }
            if(teclaPressionada === 'ArrowDown'){
                jogador.Y += 1
                console.log('Down')
                return
            }
        }

        renderScreen()

        function renderScreen(){
//
            context.fillStyle = 'white'
            context.clearRect(0,0,10,10)

            const cor1 = 'black'
            const cor2 = 'green'
            //para cada jogador , setar sua cor preta , dizer sua posição e seu tamanho
            for (const id_jogador in games.Jogadores){
                const jogador = games.Jogadores[id_jogador] // acessando cada objeto que é um dos jogadores
                context.fillStyle = cor1
                context.fillRect(jogador.X, jogador.Y, 1, 1)

            }

            for (const id_fruta in games.Frutas){
                const fruta = games.Frutas[id_fruta] // acessando cada objeto que é um dos jogadores
                context.fillStyle = cor2
                context.fillRect(fruta.X, fruta.Y, 1, 1)

            }

            requestAnimationFrame(renderScreen)
        }
    </script>
</body>
</html>